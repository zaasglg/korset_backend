# API –¢–∞—Ä–∏—Ñ–æ–≤ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

API —Ç–∞—Ä–∏—Ñ–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –∏ –ø–æ–∫—É–ø–∞—Ç—å –∏—Ö –∑–∞ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏–∑ –∫–æ—à–µ–ª—å–∫–∞.

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã API

### üîì **–ü—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)**

#### 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–∞—Ä–∏—Ñ—ã

**GET** `/api/tariffs`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤.

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "–ë–∞–∑–æ–≤—ã–π",
      "price": "5000.00",
      "discount_price": "4000.00",
      "description": "–ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
      "features": ["–†–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–æ 10 –æ–±—ä—è–≤–ª–µ–Ω–∏–π", "–ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞"],
      "is_active": true,
      "created_at": "2025-08-15T10:00:00.000000Z",
      "updated_at": "2025-08-15T10:00:00.000000Z"
    }
  ]
}
```

#### 2. –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ

**GET** `/api/tariffs/{id}`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` - ID —Ç–∞—Ä–∏—Ñ–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "–ë–∞–∑–æ–≤—ã–π",
    "price": "5000.00",
    "discount_price": "4000.00",
    "description": "–ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
    "features": ["–†–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–æ 10 –æ–±—ä—è–≤–ª–µ–Ω–∏–π", "–ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞"],
    "is_active": true
  }
}
```

---

### üîí **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (—Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)**

#### 3. –ö—É–ø–∏—Ç—å —Ç–∞—Ä–∏—Ñ

**POST** `/api/tariffs/{id}/purchase`

–ü–æ–∫—É–ø–∞–µ—Ç —Ç–∞—Ä–∏—Ñ –∑–∞ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏–∑ –∫–æ—à–µ–ª—å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Authorization: Bearer {token}
Content-Type: application/json
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` - ID —Ç–∞—Ä–∏—Ñ–∞ –¥–ª—è –ø–æ–∫—É–ø–∫–∏

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:**
```json
{
  "success": true,
  "message": "–¢–∞—Ä–∏—Ñ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω",
  "data": {
    "user_tariff": {
      "id": 1,
      "user_id": 12,
      "tariff_id": 1,
      "paid_amount": "4000.00",
      "purchased_at": "2025-08-15T12:00:00.000000Z",
      "expires_at": "2025-09-15T12:00:00.000000Z",
      "status": "active",
      "tariff": {
        "id": 1,
        "name": "–ë–∞–∑–æ–≤—ã–π",
        "description": "–ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö"
      }
    },
    "new_balance": "6000.00",
    "expires_at": "2025-09-15T12:00:00.000000Z"
  }
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤):**
```json
{
  "success": false,
  "message": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ",
  "required_amount": "4000.00",
  "current_balance": "2000.00"
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ (—É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞—Ä–∏—Ñ):**
```json
{
  "success": false,
  "message": "–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞—Ä–∏—Ñ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞"
}
```

#### 4. –ü–æ–ª—É—á–∏—Ç—å –º–æ–∏ —Ç–∞—Ä–∏—Ñ—ã

**GET** `/api/my-tariffs`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫—É–ø–ª–µ–Ω–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Authorization: Bearer {token}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "user_id": 12,
      "tariff_id": 1,
      "paid_amount": "4000.00",
      "purchased_at": "2025-08-15T12:00:00.000000Z",
      "expires_at": "2025-09-15T12:00:00.000000Z",
      "status": "active",
      "tariff": {
        "id": 1,
        "name": "–ë–∞–∑–æ–≤—ã–π",
        "description": "–ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
        "features": ["–†–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–æ 10 –æ–±—ä—è–≤–ª–µ–Ω–∏–π", "–ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞"]
      }
    }
  ],
  "active_count": 1
}
```

---

## –°—Ç–∞—Ç—É—Å—ã —Ç–∞—Ä–∏—Ñ–æ–≤

- `active` - –ê–∫—Ç–∏–≤–Ω—ã–π —Ç–∞—Ä–∏—Ñ
- `expired` - –ò—Å—Ç–µ–∫—à–∏–π —Ç–∞—Ä–∏—Ñ
- `cancelled` - –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–π —Ç–∞—Ä–∏—Ñ

## –õ–æ–≥–∏–∫–∞ –ø–æ–∫—É–ø–∫–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞—Ä–∏—Ñ–∞** - —Ç–∞—Ä–∏—Ñ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–º
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤** - –Ω–∞ –±–∞–ª–∞–Ω—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** - –Ω–µ–ª—å–∑—è –∫—É–ø–∏—Ç—å —É–∂–µ –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞—Ä–∏—Ñ
4. **–°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤** - –¥–µ–Ω—å–≥–∏ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Å –∫–æ—à–µ–ª—å–∫–∞
5. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏** - —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –æ –ø–æ–∫—É–ø–∫–µ —Ç–∞—Ä–∏—Ñ–∞
6. **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è** - —Ç–∞—Ä–∏—Ñ –¥–µ–π—Å—Ç–≤—É–µ—Ç 1 –º–µ—Å—è—Ü

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–∞—Ä–∏—Ñ—ã:
```bash
curl -X GET "https://yourapp.com/api/tariffs" \
  -H "Accept: application/json"
```

### –ö—É–ø–∏—Ç—å —Ç–∞—Ä–∏—Ñ:
```bash
curl -X POST "https://yourapp.com/api/tariffs/1/purchase" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–∏ —Ç–∞—Ä–∏—Ñ—ã:
```bash
curl -X GET "https://yourapp.com/api/my-tariffs" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Accept: application/json"
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `400` - –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
- `401` - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `404` - –¢–∞—Ä–∏—Ñ –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞